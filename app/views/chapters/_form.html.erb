<% content_for :javascript do %>
  <%= javascript_include_tag "/assets/tinymce/tinymce.min.js" %>
<% end %>

<%= form_with model: (chapter.new_record? ? [ chapter.story, chapter ] : chapter) do |f| %>
  <div class="flex flex-row items-baseline w-full my-4">
    <div><label for="chapter_title" class="text-lg">Title:</label></div>
    <div class="flex flex-col ml-3 w-1/2">
      <%= f.text_field :title, required: true, class: 'focus:outline-none focus:ring-0 border-x-0 border-t-0 pb-0 px-1 text-lg' %>
    </div>
  </div>

  <div class="flex flex-row items-baseline mt-4">
    <%= f.check_box :interactive, class: "mr-2" %> <label for="chapter_iteractive" class="text-lg">Allow comments?</label>
  </div>

  <div class="editor-container mt-4" data-controller="chapter-editor" data-chapter-editor-header-selector-value="header">
    <div class="toolbar" data-chapter-editor-target="toolbar"></div>
    <div class="editor prose--traditional" data-chapter-editor-target="editor"><%= @chapter.content %></div>
  </div>

  <div class="mt-4 mb-12">
    <%= f.submit "Save", class: "rounded bg-blue-100 hover:bg-blue-300 px-4 py-2" %>
    <span class="mx-1">or</span>
    <%= link_to "Cancel", chapter.persisted? ? chapter_path(chapter) : story_path(chapter.story), class: "ts-cancel" %>
  </div>
<% end %>
