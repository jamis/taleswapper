<div class="flex-col max-w-screen-xl mb-12">
  <div class="flex flex-row items-baseline">
    <h1 class="text-2xl font-bold"><%= @story.title %> <%= @story.subtitle ? "(#{@story.subtitle})" : '' %></h1>
    <% if editable_story? %>
      <span class="ml-2">[ <%= link_to "Edit", edit_story_path(@story), class: "text-blue-700 underline" %> ]</span>
    <% end %>
  </div>
  <h2 class="text-xl font-bold">by <%= link_to @story.creator.display_name, creator_path(@story.creator), class: "underline text-blue-600" %></h2>

  <div class="markdown">
    <%=md @story.description %>
  </div>

  <% if @story.chapters.empty? %>
    <div class="mt-4 rounded bg-blue-100 px-6 py-3">
      <p>You haven't added any chapters to this story yet.</p>
      <p><%= link_to "Add your first chapter now!", new_story_chapter_path(@story), class: "text-blue-600 underline" %></p>
    </div>
  <% else %>
    <div class="mt-8 flex flex-row items-baseline">
      <h2 class="text-xl font-bold">Table of Contents</h2>
      <% if editable_story? %>
        <span class="ml-2">[ <%= link_to "Add a new chapter", new_story_chapter_path(@story), class: "text-blue-600 underline" %> ]</span>
      <% end %>
    </div>

    <ul class="list-disc mt-4">
      <% if @story.setup&.published? %>
        <li class="ml-8"><%= link_to @story.setup_title, chapter_path(@story.setup), class: "text-blue-600 underline" %></li>
      <% end %>
      <% if @story.beginning&.published? %>
        <li class="ml-8"><%= link_to @story.beginning_title, chapter_path(@story.beginning), class: "text-blue-600 underline" %></li>
      <% end %>
    </ul>
  <% end %>
</div>
